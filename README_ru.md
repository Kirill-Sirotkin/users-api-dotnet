# Users API

[ReadMe in English](README.md)

## Описание

Этот проект нацелен на предоставление бекэнд API для управления сущностью User

## Особенности

- Swagger UI доступен для легкого взаимодействия с API
- 10 доступных точек доступа к API для разнообразных способов управления сущностью Users
- 1 вспомогательная точка доступа для удобного создания первого Админа

>**Примечание:**
>Полную OpenApi спецификацию можно найти [здесь](./OPENAPI_spec.md).

## Технические особенности

- Хранение данных при помощи PostgreSQL
- Система аутентификации и авторизации при помощи JSON Web Token

>**Примечание:**
>Большинство точек доступа требуют Bearer JWT токен авторизации. Токен генерируется и является возвратным значением следующей точки доступа: [/api/v1/users/by-login-password](./OPENAPI_spec.md#postapiv1usersby-login-password).

## Настройка

### Ключевые необходимые условия

- Сервис PostgreSQL, установленный и запущенный на вашей системе
- Файл ```.env``` в корневой папке проекта со следующими переменными среды:
    - ```DATABASE_URL``` - ссылка для подключения к сервису PostgreSQL. Пример приведен ниже; замените переменные ```YOUR_...``` своими собственными настройками.
    ```
    DATABASE_URL="Host=YOUR_HOST;Port=YOUR_PORT;Username=YOUR_USERNAME;Password=YOUR_PASSWORD;Database=usersApi"
    ```
    - ```JWT_SECRET``` - ключ для подписи JWT сервером. Убедитесь, что строка достаточно длинная, поскольку этого требует криптографический алгоритм (например, 120 символов).
    ```
    JWT_SECRET="YOUR_LONG_SECRET_STRING"
    ```
    - ```JWT_EXPIRES_IN_MINUTES``` - длительность JWT в минутах. Может быть любым количеством минут.
    ```
    JWT_EXPIRES_IN_MINUTES="5"
    ```

### Необходимые команды (в порядке применения)

1. ```dotnet restore``` - установить необходимые зависимости.
2. ```dotnet ef database update``` - применить миграциб базы данных к вашему PostgreSQL. Это создаст базу данных ```usersApi``` и таблицу ```Users``` в Postgres. Этот шаг можно пропустить если вы создадите базу данных вручную с необходимй таблицей для сущности User.
3. ```dotnet watch run``` - запустить API в режиме просмотра. После этого в вашем браузере запустится Swagger UI (если не запустился, по умолчанию туда можно попасть через http://localhost:5148/swagger/index.html) и точки доступа API можно будет использовать.